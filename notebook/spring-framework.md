```sequence
title:spring
participant AbstractApplicationContext
participant AbstractRefreshableApplicationContext
participant AbstractXmlApplicationContext
participant XmlBeanDefinitionReader
participant BeanDefinitionDocumentReader
participant BeanDefinitionParserDelegate
AbstractApplicationContext->AbstractApplicationContext: obtainFreshBeanFactory()
AbstractApplicationContext->AbstractRefreshableApplicationContext:refreshBeanFactory()
AbstractRefreshableApplicationContext->AbstractXmlApplicationContext:loadBeanDefinitions(DefaultListableBeanFactory beanFactory) 创建BeanFactory(DefaultListableBeanFactory)
AbstractXmlApplicationContext->AbstractXmlApplicationContext:loadBeanDefinitions(XmlBeanDefinitionReader reader) 创建XmlBeanDefinitionReader
AbstractXmlApplicationContext->XmlBeanDefinitionReader:loadBeanDefinitions(String... locations) 查找xml配置文件
XmlBeanDefinitionReader->XmlBeanDefinitionReader:loadBeanDefinitions(EncodedResource encodedResource) 加载xml配置文件
XmlBeanDefinitionReader->XmlBeanDefinitionReader:doLoadBeanDefinitions(InputSource inputSource, Resource resource) 解析xml为document
XmlBeanDefinitionReader->BeanDefinitionDocumentReader:doRegisterBeanDefinitions(Element root) 根据document封装Beandefinition
BeanDefinitionDocumentReader->BeanDefinitionDocumentReader: parseBeanDefinitions(Element root, BeanDefinitionParserDelegate delegate) 委托解析parseDefaultElement(Element ele, BeanDefinitionParserDelegate delegate) 解析默认标签 parseCustomElement(Element ele)解析自定义标签
BeanDefinitionDocumentReader->BeanDefinitionParserDelegate:parseBeanDefinitionElement(Element ele, @Nullable BeanDefinition containingBean) 委托解析 <bean> 属性以及自标签
BeanDefinitionParserDelegate-->BeanDefinitionDocumentReader: BeanDefinitionHodler BeanDefinition的包装 两个属性 beanName, BeanDefinition


AbstractRefreshableApplicationContext-->AbstractApplicationContext: BeanFactory
```